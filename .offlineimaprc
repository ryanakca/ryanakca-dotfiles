# Sample minimal config file.  Copy this to ~/.offlineimaprc and edit to
# suit to get started fast.

[general]
metadata = ~/.offlineimap
accounts = GMAIL, QueensU, McGillSOCS, McGill
#, GMAIL
pythonfile=~/.offlineimap.py
# EIMEAR
maxsyncaccounts = 5

#### GMAIL Account Settings
[Account GMAIL]
localrepository = LocalGmail
remoterepository = RemoteGmail
autorefresh = 20
quick = 10
presynchook = imapfilter -c /home/ryan/.imapfilter/config.lua
postsynchook = imapfilter -c /home/ryan/.imapfilter/config.lua && /home/ryan/bin/run-mailcheck && notmuch new
foldersort = mycmp

[Repository LocalGmail]
#type = Maildir    
#localfolders = ~/.maildb/GMAIL 
#restoreatime = no  
type = IMAP
remotehost = localhost
remoteuser = ryan
remotepass = LOCAL_PASS
folderfilter = lambda folder: folder not in ['[Google Mail]/All Mail'] and not folder.startswith('QueensU.')
idlefolders = ['INBOX']

[Repository RemoteGmail]
foldersort = lambda x, y: mycmp(x, y)
type = Gmail
maxconnections = 4
remoteuser = ryanakca@gmail.com
remotepass = GMAIL_PASS
spamfolder = [Google Mail]/Spam
trashfolder = [Google Mail]/Bin
realdelete = no
folderfilter = lambda folder: folder not in ['[Google Mail]/All Mail'] and not folder.startswith('QueensU.')
idlefolders = ['INBOX']

##### QueensU mail
[Account QueensU]
localrepository = LocalQueensU
remoterepository = RemoteQueensU
autorefresh = 20
quick = 10
# presynchook = imapfilter
foldersort = lamba x, y: cmp(x, y)
postsynchook = /home/ryan/bin/run-mailcheck && notmuch new

[Repository RemoteQueensU]
foldersort = lambda x, y: cmp(y, x)
type = IMAP
remoteuser = 9rak
remotehost = mail.queensu.ca
remotepass = QUEENSU_PASS
# Add QueensU prefix when copying to local
nametrans = lambda foldername: 'QueensU.' + foldername

[Repository LocalQueensU]
type = IMAP
remotehost = localhost
remoteuser = ryan
remotepass = LOCAL_PASS
# Only copy folders from local to remote if they start with QueensU
folderfilter = lambda folder: folder.startswith('QueensU.')
# Remove QueensU prefix when copying to remote
nametrans = lambda folder: re.sub('^QueensU.', '', folder)

#### McGillSOCS mail
[Account McGillSOCS]
localrepository = LocalMcGillSOCS
remoterepository = RemoteMcGillSOCS
autorefresh = 20
quick = 10
# presynchook = imapfilter
foldersort = lamba x, y: cmp(x, y)
postsynchook = /home/ryan/bin/run-mailcheck && notmuch new

[Repository RemoteMcGillSOCS]
foldersort = lambda x, y: cmp(y, x)
type = IMAP
remoteuser = ryank
remotehost = mail.cs.mcgill.ca
remotepass = MCGSOCS_PASS
ssl = yes
cert_fingerprint = 20:7B:11:4F:C9:CD:4A:52:F5:86:A3:50:A4:DF:AB:05:C5:C7:AD:8B
# sslcacertfile = /home/ryan/.mutt/certs/mcgillsocs.crt
# Add McGSOCS prefix when copying to local
nametrans = lambda foldername: 'McGSOCS.' + foldername
folderfilter = lambda folder: folder not in ['user.globalspam']

[Repository LocalMcGillSOCS]
type = IMAP
remotehost = localhost
remoteuser = ryan
remotepass = LOCAL_PASS
# Only copy folders from local to remote if they start with McGSOCS
folderfilter = lambda folder: folder.startswith('McGSOCS.')
# Remove McGSOCS prefix when copying to remote
nametrans = lambda folder: re.sub('^McGSOCS.', '', folder)

#### McGill mail
[Account McGill]
localrepository = LocalMcGill
remoterepository = RemoteMcGill
autorefresh = 20
quick = 10
# presynchook = imapfilter
foldersort = lamba x, y: cmp(x, y)
postsynchook = /home/ryan/bin/run-mailcheck && notmuch new

[Repository RemoteMcGill]
foldersort = lambda x, y: cmp(y, x)
type = IMAP
remoteuser = ryan.kavanagh@mail.mcgill.ca
remotehost = exchange.mcgill.ca
remotepass = MCGILL_PASS
remortport = 993
ssl = yes
# cert_fingerprint = 20:7B:11:4F:C9:CD:4A:52:F5:86:A3:50:A4:DF:AB:05:C5:C7:AD:8B
# sslcacertfile = /home/ryan/.mutt/certs/mcgillsocs.crt
# Add McGSOCS prefix when copying to local
nametrans = lambda foldername: 'McGill.' + foldername

[Repository LocalMcGill]
type = IMAP
remotehost = localhost
remoteuser = ryan
remotepass = LOCAL_PASS
# Only copy folders from local to remote if they start with McGSOCS
folderfilter = lambda folder: folder.startswith('McGill.')
# Remove McGSOCS prefix when copying to remote
nametrans = lambda folder: re.sub('^McGill.', '', folder)

[mbnames]
enabled = no
filename = .muttrc.mailboxes
header = "mailboxes "
peritem = "+%(foldername)s"
sep = " "
footer = "\n"

[ui.Curses.Blinkenlights]
statuschar = %
