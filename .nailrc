define clearset {
    unset folder from sendmail record smtp password
    unset smime-sign smime-sign-cert smime-sign-nickname
    unset hold
}

account l {
    call clearset
    set from="rak@ryanak.ca (Ryan Kavanagh)"
}

account d {
    call clearset
    set folder=imap://ryan@localhost/
    set sendmail=HOMEDIR/bin/msmtp/msmtp-default
    set from="Ryan Kavanagh <rak@debian.org>"
}

account g {
    call clearset
    set from="Ryan Kavanagh <rak@debian.org>"
    set folder=imaps://ryanakca%40gmail.com@imap.gmail.com/
    set password-ryanakca%40gmail.com@imap.gmail.com=GMAIL_mailx_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-default
    set imap-keepalive=30
    set hold
    unset MBOX

}

account q {
    call clearset
    set from="Ryan Kavanagh <ryan.kavanagh@queensu.ca>"
    set folder=imaps://9rak%40queensu.ca@pod51018.outlook.com/
    set imap-starttls-9rak%40queensu.ca@pod51018.outlook.com
    set password-9rak%40queensu.ca@pod51018.outlook.com=QUEENSU_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-queensu

    set MBOX=@Read
    set record=@"Sent Items"
}

account r {
    call clearset
    set from="Ryan Kavanagh <rak@ryanak.ca>"
    set folder=imaps://rak@imap.ryanak.ca/
    set imap-starttls-rak@imap.ryanak.ca
    set password-rak@imap.ryanak.ca=RYANAKCA_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-ryanakca

    set MBOX=@Read
    set record=@Sent
}

account c {
    call clearset
    set from="Ryan Kavanagh <rkavanag@andrew.cmu.edu>"
    set folder=imaps://rkavanag%40andrew.cmu.edu@imap.gmail.com/
    set password-rkavanag%40andrew.cmu.edu@imap.gmail.com=CMU_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-cmu

    set MBOX=@Read
}

source ~/.mailx-aliases.rc
source ~/.mailrc

set password-rak@imap.ryanak.ca=RYANAKCA_PASS
set record=imaps://rak@imap.ryanak.ca/Sent

# Don't display X-Brightmail-Tracker header cruft
ignore "X-Brightmail-Tracker"

set ssl-ca-dir=/etc/ssl/certs/

set pipe-text/html="w3m -dump -T text/html"
set pipe-application/pgp-signature="gpg --verify"
set cmd="gpg-check | mail-highlight"
set PAGER="less -FXQR"

set nss-config-dir="~/.mozilla/firefox/dbr0vzdh.default/"

set imap-cache=HOMEDIR/.cache/mailx
set imap-keepalive=60

set autosort=thread
unset autocollapse
# Requires me to manually add the leading '-- '
set signature=~/.signature-mailx
set bsdcompat

set MBOX=~/mbox

set quote="headers"

shortcut mitm imaps://rakavan@imap.exchange.mit.edu:993/
shortcut lh imap://ryan@localhost/

set keep

set crt=50

# Use colours even with the pager
set colour-pager=true
# Indent the message to which I'm replying with "> "
set indentprefix="> "
# Don't strip names/comments when replying
set fullnames
# My other addresses
set alternates="ryanakca@gmail.com,rak@debian.org,rak@ryanak.ca,rkavanag@andrew.cmu.edu,rkavanag@cs.cmu.edu,rkavanagh@cs.cmu.edu,ryan@cs.queensu.ca"
# Give header when replying
set quote

# mailing lists
set followup-to followup-to-honour=ask-yes reply-to-honour=ask-yes
