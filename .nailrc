define clearset {
    unset folder from sendmail record smtp password
    unset smime-sign smime-sign-cert smime-sign-nickname
}

account l {
    call clearset
    set from="rak@ryanak.ca (Ryan Kavanagh)"
}

account d {
    call clearset
    set folder=imap://ryan@localhost/
    set sendmail=HOMEDIR/bin/msmtp/msmtp-default
    set from="Ryan Kavanagh <rak@debian.org>"
}

account g {
    call clearset
    set folder=imaps://ryanakca@gmail.com@imap.gmail.com/
    set password-ryanakca@gmail.com@imap.gmail.com=GMAIL_mailx_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-default
    set from="Ryan Kavanagh <rak@debian.org>"
    set imap-keepalive=30
}

account q {
    call clearset
    set folder=imap://ryan@localhost/QueensU.INBOX
    set record=@QueensU.Sent
    set MBOX=@QueensU.Read
    set sendmail=HOMEDIR/bin/msmtp/msmtp-queensu
    set from="ryan.kavanagh@queensu.ca (Ryan Kavanagh)"
    unset smime-sign
}

account r {
    call clearset
    set from="Ryan Kavanagh <rak@ryanak.ca>"
    set folder=imaps://rak@hermes.ryanak.ca/
    set imap-starttls-rak@hermes.ryanak.ca
    set password-rak@hermes.ryanak.ca=RYANAKCA_PASS

    set MBOX=@Read
    set record=@Sent
}

account s {
    call clearset
    set from="Ryan Kavanagh <rkavanag@cs.cmu.edu>"
    set folder=imaps://rkavanag@imap.srv.cs.cmu.edu/
    set imap-starttls-rkavanag@imap.srv.cs.cmu.edu
    set password-rkavanag@imap.srv.cs.cmu.edu=CMUSCS_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-cmuscs

    set MBOX=@INBOX.Read
    set record=@INBOX.Sent
}

account c {
    call clearset
    set folder=imaps://rkavanag@andrew.cmu.edu@imap.gmail.com/
    set password-rkavanag@andrew.cmu.edu@imap.gmail.com=CMU_PASS
    set sendmail=HOMEDIR/bin/msmtp/msmtp-cmu
    set from="Ryan Kavanagh <rkavanag@andrew.cmu.edu>"

    set MBOX=@Read
}

source ~/.mailx-aliases.rc
source ~/.mailrc

set password-rak@hermes.ryanak.ca=RYANAKCA_PASS
set record=imaps://rak@hermes.ryanak.ca/Sent

# Don't display X-Brightmail-Tracker header cruft
ignore "X-Brightmail-Tracker"

set ssl-ca-dir=/etc/ssl/certs/

set pipe-text/html="w3m -dump -T text/html"
set pipe-application/pgp-signature="gpg --verify"
set cmd="gpg-check | mail-highlight"
set PAGER="less -FXQR"

set nss-config-dir="~/.mozilla/firefox/dbr0vzdh.default/"

set imap-cache=HOMEDIR/.mailx/cache
set imap-keepalive=60

set autosort=thread
unset autocollapse
# Requires me to manually add the leading '-- '
set signature=~/.signature-mailx
set bsdcompat

set MBOX=~/mbox

set quote="headers"

shortcut mitm imaps://rakavan@imap.exchange.mit.edu:993/
shortcut lh imap://ryan@localhost/

set keep

set crt=50
